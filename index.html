<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xyon AIO | Created by Kasan</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #191919;
            color: #ffffff;
            overflow-x: hidden;
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #191919; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        
        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #FFD700 0%, #FDB931 50%, #d4af37 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .btn-gradient {
            background: linear-gradient(135deg, #FFD700 0%, #FDB931 100%);
        }

        .loader {
            width: 20px;
            height: 20px;
            border: 2px solid #000;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="antialiased selection:bg-yellow-500 selection:text-black">

    <!-- Navbar -->
    <nav class="fixed w-full z-50 top-0 bg-[#191919]/90 backdrop-blur-md border-b border-white/5">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold tracking-tight flex items-center gap-2 group">
                <i class="ph-fill ph-planet text-yellow-500 text-3xl group-hover:rotate-180 transition duration-500"></i>
                <span>Xyon<span class="font-light text-gray-500">.AIO</span></span>
            </a>
            
            <div class="flex items-center gap-4">
                <a href="https://github.com/Shanove7" target="_blank" class="text-sm font-medium text-gray-400 hover:text-white flex items-center gap-2 transition bg-white/5 px-4 py-2 rounded-full border border-white/5 hover:border-white/20">
                    <i class="ph-fill ph-github-logo text-lg"></i>
                    <span class="hidden md:inline">Shanove7</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Section -->
    <section class="min-h-screen pt-24 pb-12 px-6 flex flex-col items-center justify-center relative overflow-hidden">
        
        <!-- Background Effects -->
        <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-yellow-600/10 rounded-full blur-[150px] pointer-events-none"></div>
        <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-purple-600/10 rounded-full blur-[150px] pointer-events-none"></div>

        <div class="text-center max-w-3xl z-10" data-aos="fade-up">
            <!-- Credits Badge -->
            <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-yellow-500/20 bg-yellow-500/5 text-[10px] font-bold text-yellow-500 uppercase tracking-widest mb-4">
                <span class="w-2 h-2 rounded-full bg-yellow-500 animate-pulse"></span>
                System by Kasan
            </div>

            <h1 class="text-5xl md:text-7xl font-bold mb-6 leading-tight">
                All-in-One <br>
                <span class="text-gradient">Video Downloader</span>
            </h1>
            
            <!-- Rules & Limit Info -->
            <div class="flex flex-wrap justify-center gap-3 mb-8 text-xs font-mono text-gray-400">
                <span class="bg-black/40 px-3 py-1 rounded border border-white/10 flex items-center gap-2">
                    <i class="ph-fill ph-timer text-red-400"></i> Delay: 1 Detik
                </span>
                <span class="bg-black/40 px-3 py-1 rounded border border-white/10 flex items-center gap-2">
                    <i class="ph-fill ph-warning-octagon text-orange-400"></i> Limit: 100/Jam
                </span>
                <span class="bg-black/40 px-3 py-1 rounded border border-white/10 flex items-center gap-2">
                    <i class="ph-fill ph-check-circle text-green-400"></i> Status: Online
                </span>
            </div>
        </div>

        <!-- Input Section -->
        <div class="w-full max-w-2xl z-10" data-aos="fade-up" data-aos-delay="100">
            <div class="glass p-2 rounded-2xl flex flex-col md:flex-row items-center shadow-2xl gap-2 transition-all focus-within:ring-1 focus-within:ring-yellow-500/50">
                <div class="w-full flex items-center px-4">
                    <i class="ph ph-link text-gray-500 text-xl mr-3"></i>
                    <input type="text" id="urlInput" 
                        class="w-full bg-transparent border-none text-white py-4 text-base outline-none placeholder-gray-600 font-light" 
                        placeholder="Tempel link IG, TikTok, YouTube, FB..." autocomplete="off">
                </div>
                <button onclick="fetchVideo()" id="downloadBtn" 
                    class="w-full md:w-auto btn-gradient text-black px-8 py-4 rounded-xl font-bold transition-transform hover:scale-105 hover:shadow-lg flex items-center justify-center gap-2 whitespace-nowrap">
                    <span>Proses</span>
                    <i class="ph-bold ph-arrow-right"></i>
                </button>
            </div>
            
            <!-- Status & Error Container -->
            <div id="statusArea" class="mt-6 text-center hidden transition-all">
                <p id="statusMsg" class="text-sm font-medium mb-2"></p>
                <a href="https://wa.me/6285185032092?text=Halo%20Kasan,%20website%20Xyon%20error%20saat%20download%20link%20ini..." 
                   target="_blank" 
                   id="waBtn"
                   class="inline-flex items-center gap-2 bg-[#25D366]/10 text-[#25D366] px-4 py-2 rounded-full text-xs hover:bg-[#25D366]/20 transition hidden">
                    <i class="ph-fill ph-whatsapp-logo text-lg"></i>
                    Hubungi Kasan (Lapor Error)
                </a>
            </div>
        </div>

        <!-- Result Card -->
        <div id="resultContainer" class="hidden w-full max-w-3xl mt-12 z-10 animate-fade-in-up">
            <div class="glass rounded-3xl overflow-hidden p-8 flex flex-col md:flex-row gap-8 items-start relative">
                <!-- Branding Stamp -->
                <div class="absolute top-0 right-0 bg-yellow-500 text-black text-[10px] font-bold px-3 py-1 rounded-bl-xl z-20">
                    POWERED BY KASAN
                </div>

                <!-- Thumbnail -->
                <div class="w-full md:w-5/12 aspect-square md:aspect-[4/5] bg-black/50 rounded-2xl overflow-hidden relative shadow-2xl border border-white/5">
                    <img id="thumb" src="" class="w-full h-full object-cover">
                </div>

                <!-- Info -->
                <div class="w-full md:w-7/12">
                    <h3 class="text-2xl font-bold text-white mb-2 line-clamp-2" id="videoTitle">Video Found</h3>
                    <p class="text-sm text-gray-400 mb-6">Siap diunduh. Gunakan dengan bijak.</p>
                    
                    <div class="space-y-3" id="downloadButtons">
                        <!-- Buttons injected via JS -->
                    </div>
                    
                    <button onclick="resetApp()" class="mt-6 text-sm text-gray-500 hover:text-white flex items-center gap-2 transition">
                        <i class="ph ph-trash"></i> Reset
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-12 px-6 text-center border-t border-white/5 bg-[#141414]">
        <div class="flex flex-col items-center justify-center gap-2">
            <p class="text-gray-400 text-sm">&copy; 2025 Xyon AIO. All rights reserved.</p>
            <p class="text-gray-500 text-xs">
                Dibuat sepenuhnya oleh <a href="https://github.com/Shanove7" target="_blank" class="text-yellow-500 hover:text-yellow-400 font-bold hover:underline">Kasan (Shanove7)</a>
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({ once: true, duration: 800 });

        // --- KONFIGURASI KASAN ---
        const API_TOKEN = 'JpnZ9RAfUTSjdS1Vtssr77bn';
        let lastRequestTime = 0;

        function resetApp() {
            document.getElementById('resultContainer').classList.add('hidden');
            document.getElementById('urlInput').value = '';
            hideStatus();
        }

        function hideStatus() {
            const area = document.getElementById('statusArea');
            area.classList.add('hidden');
            document.getElementById('waBtn').classList.add('hidden');
        }

        function showStatus(msg, type) {
            const area = document.getElementById('statusArea');
            const txt = document.getElementById('statusMsg');
            const wa = document.getElementById('waBtn');
            
            area.classList.remove('hidden');
            txt.innerText = msg;

            if(type === 'error') {
                txt.className = "text-sm font-medium mb-2 text-red-500";
                wa.classList.remove('hidden'); // Munculin tombol WA kalo error
            } else if(type === 'success') {
                txt.className = "text-sm font-medium mb-2 text-green-500";
                wa.classList.add('hidden');
            } else {
                txt.className = "text-sm font-medium mb-2 text-yellow-500";
                wa.classList.add('hidden');
            }
        }

        async function fetchVideo() {
            const url = document.getElementById('urlInput').value.trim();
            const btn = document.getElementById('downloadBtn');
            const now = Date.now();

            // 1. Cek Input Kosong
            if(!url) return showStatus('Link tidak boleh kosong!', 'error');

            // 2. Cek Rate Limit (1 detik)
            if (now - lastRequestTime < 1000) {
                return showStatus('Sabar bos! Tunggu 1 detik...', 'error');
            }
            lastRequestTime = now;

            // UI Loading
            const oldBtn = btn.innerHTML;
            btn.innerHTML = `<span class="loader"></span>`;
            btn.disabled = true;
            document.getElementById('resultContainer').classList.add('hidden');
            showStatus('Menghubungkan ke Server Kasan...', 'normal');

            try {
                // API Request
                const apiUrl = `https://fastsaverapi.com/api/v1/getUrl?token=${API_TOKEN}&url=${encodeURIComponent(url)}`;
                
                const response = await fetch(apiUrl);
                const data = await response.json();

                // Validasi Error API
                if(!data || data.error) {
                    throw new Error('Gagal mengambil data. Pastikan link publik atau kuota habis (100/jam).');
                }

                renderResult(data, url);
                showStatus('Berhasil ditemukan!', 'success');

            } catch(err) {
                console.error(err);
                showStatus(`Error: ${err.message}`, 'error');
            } finally {
                btn.innerHTML = oldBtn;
                btn.disabled = false;
            }
        }

        function renderResult(data, originalUrl) {
            const container = document.getElementById('resultContainer');
            const thumb = document.getElementById('thumb');
            const title = document.getElementById('videoTitle');
            const btnContainer = document.getElementById('downloadButtons');

            // Reset
            btnContainer.innerHTML = '';

            // Set Data
            title.innerText = data.title || "Media Found";
            thumb.src = data.thumb || "https://placehold.co/600x600/1a1a1a/FFF?text=No+Thumbnail";

            // Helper Button Creator
            function createBtn(text, link, primary) {
                const a = document.createElement('a');
                a.href = link;
                a.target = "_blank";
                a.className = primary 
                    ? "w-full py-3.5 px-6 rounded-xl bg-white text-black font-bold flex items-center justify-center gap-2 hover:bg-gray-200 transition shadow-lg"
                    : "w-full py-3.5 px-6 rounded-xl bg-white/5 text-gray-300 font-medium flex items-center justify-center gap-2 hover:bg-white/10 transition border border-white/5";
                a.innerHTML = primary 
                    ? `<i class="ph-bold ph-download-simple"></i> ${text}`
                    : `<i class="ph-bold ph-music-note"></i> ${text}`;
                btnContainer.appendChild(a);
            }

            // Generate Logic
            if(data.url) createBtn("Download Video", data.url, true);
            if(data.no_watermark) createBtn("Download No Watermark", data.no_watermark, true);
            if(data.audio) createBtn("Download Audio", data.audio, false);
            
            if(Array.isArray(data.video)) {
                data.video.forEach(v => createBtn(`Download ${v.quality || 'Video'}`, v.url, true));
            }

            // Show
            container.classList.remove('hidden');
            container.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    </script>
</body>
</html>


